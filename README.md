# Заметки по ходу решения задачи

Решение тестового задания основывается на реализации трех абстракций kubernetes. (Deployment/HPA/CronJob)

*Прим. - в тексте задания идет речь о манифесте в единственном числе, но эффективную реализацию в таких условиях представить не получилось.*

Для соответствия вводным условиям:

1. Мультизональный кластер 
- nodeAffinity для распределения по требуемым зонам. При этом ограничивается влияние правила на потенциально существующие версии приложения.
- podAntiAffinity с целью предотвращения размещения под на одних и тех же нодах в нормальных условиях работы кластера.

2. Инициализация приложения (5–10 секунд) 
- readinessProbe и livenessProbe для контроля активности приложения с учетом времени, необходимого на инициализацию.

3. 4 пода справляются с пиковой нагрузкой
- деплоймент с начальным replicas, равным 4. 

4. Повышенное потребление CPU на первые запросы
- requests и limits, обеспечивающие запускаемому приложению как ресурсы для работы, так и разбег для старта.

5. Цикличность нагрузки 
- Cronjob, устанавливающая число реплик, относительно временной зоны MSK и цикличности нагрузки. ( *Прим. - одновременное существование hpa и cronjob оправдывается довольно оптимистичным предположением о четкости временных границ нагрузки* )

6. Отказоустойчивость 
- RollingUpdate, поддерживающий все занятые в момент обновления поды рабочими.
- hpa с поддержкой до 6 реплик, на случай нагрузки, выходящей за рамки тестовой.

7. Низкое потребление ресурсов 
- Во многом, сводится к пунктам свыше.